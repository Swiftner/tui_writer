# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/tui_template.ipynb.

# %% auto 0
__all__ = ['MediaControls', 'StatusCard', 'TranscriptField', 'TUITemplate']

# %% ../nbs/tui_template.ipynb 3
from textual import on
from textual.app import App, ComposeResult
from textual.containers import Container, VerticalGroup, Grid, HorizontalGroup, Center
from textual.widgets import Header, Footer, Static, Digits, Button, Label

# %% ../nbs/tui_template.ipynb 4
"""Custom composed widgets"""

class MediaControls(HorizontalGroup):

    @on(Button.Pressed, "#start")
    def start_transcript(self):
        self.add_class("active")

    @on(Button.Pressed, "#pause")
    def pause_transcript(self):
        self.remove_class("active")
        self.add_class("paused")

    @on(Button.Pressed, "#resume")
    def resume_transcript(self):
        self.remove_class("paused")
        self.add_class("active")

    @on(Button.Pressed, "#stop")
    def stop_transcript(self):
        self.remove_class("paused")
        self.remove_class("active")

    def compose(self) -> ComposeResult:
        yield Button.error("● REC", id="start")
        yield Button.success("⏸ PAUSE", id="pause")
        yield Button.warning("▶ RESUME", id="resume")
        yield Button("◼ STOP", id="stop")

class StatusCard(Label):

    def compose(self) -> ComposeResult:
        with VerticalGroup():
            yield Static("● RECORDING", classes="status")
            with Center():
                yield Digits("0:00:00", id="status-time", classes="status")
            yield MediaControls()
    
class TranscriptField(Label):
    def compose(self) -> ComposeResult:
        yield Static("ediufiuhefioheif", classes="status")

# %% ../nbs/tui_template.ipynb 5
class TUITemplate(App):
    """Standalone TUI template for design testing."""

    TITLE = "TUI Writer"
    SUB_TITLE = "Design Template"
    CSS = """
    Screen {
        background: $surface;
    }
    Header {
        background: $primary;
    }

    StatusCard {
        width: 50%;
        margin-top: 1;
        border: solid $primary;
        border-title-align: left;
    }

    .status {
        content-align: center middle;
    }

    #status-time {
        border: double green;
        width: auto;
        padding: 0 1;
        margin: 1 0;
    }

    MediaControls {
        align: center middle;
    }

    MediaControls Button {
        min-width: 14;
    }

    #pause,
    #resume,
    #stop {
        display: none;
    }

    .active #start {
        display: none;
    }
    .active #pause,
    .active #stop {
        display: block;
    }

    .paused #start {
        display: none;
    }
    
    .paused #resume,
    .paused #stop {
        display: block;
    }

    TranscriptField {
        width: 100%;
        margin: 1;
        padding: 1;
        border: solid $accent;
        border-title-align: center;
        height: 70%;
    }
    """

    BINDINGS = [
        ("q", "quit", "Quit"),
        ("d", "toggle_dark", "Toggle dark mode"),
    ]
    
    def compose(self) -> ComposeResult:
        header = Header(show_clock=True)
        header.tall = True
        yield header

        with Center():
            status_card = StatusCard()
            status_card.border_title = "Recording Status"
            yield status_card


        transcript_field = TranscriptField()
        transcript_field.border_title = "Transcription Field"
        yield transcript_field


        yield Footer()

    def action_toggle_dark(self) -> None:
        """An action to toggle dark mode."""
        self.theme = (
            "textual-dark" if self.theme == "textual-light" else "textual-light"
        )

# %% ../nbs/tui_template.ipynb 6
if __name__ == "__main__":
    app = TUITemplate()
    app.run()
